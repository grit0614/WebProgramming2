<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Animation Practice</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    
    <style type="text/css">
        #target {
            width: 40px;
            height: 40px;
            background-color: red;
            position: absolute;
            top: 100px; left: 100px;
        }
    </style>
</head>
<body>
    <input type="checkbox" id="clearQueue">
    <label for="clearQueue">clearQueue</label><br/>
    <input type="checkbox" id="gotoEnd">
    <label for="gotoEnd">gotoEnd</label><br/>
    
    <button onclick="startAni();">시작</button>
    <button onclick="endAni();">종료</button>
    <div id="target"></div>
    
    <script>
        clearQueue = false, gotoEnd = false;
        
        $("#clearQueue").change(function() {
            clearQueue = $(this).prop("checked");
        });
        
        $("#gotoEnd").change(function() {
            gotoEnd = $(this).prop("checked");
        });
        
        function init() {
            $("#target").animate({ "top" : "100px", "left" : "100px" });
        }
        
        function startAni() {
            $("#target").animate({ "top" : "200px", "left" : "200px" });
            $("#target").animate({ "left" : "100px"}, 3000);
            $("#target").animate({ "top" : "200px", "left" : "200px" }, 1000, "linear", function() {init()});
        }
        
        function endAni() {
            $("#target").stop(clearQueue, gotoEnd);
        }
    </script>
</body>
</html>